<div class="flex justify-between sticky top-[-17px] bg-[#121212] py-4 z-10">
    <div>
        <% if (breadcrumb) { %>
            <a href='<%= breadcrumb.link %>'
                class="text-white font-bold text-2xl ml-4 flex items-center hover:text-blue-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                <%= breadcrumb.title %>
            </a>
            <% } %>
    </div>


    <div class="flex justify-center items-center">
        <div class="flex items-center mr-4">
            <form id="searchForm" action="/videos" method="GET">
                <div class="flex items-center">
                    <input type="text" id="searchInput" name="query" placeholder="Search"
                        class="w-64 px-4 py-2 text-black bg-white border-none rounded-l-full focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-transparent placeholder-gray-400">
                    <button type="submit"
                        class="pl-2 pr-3 py-2 font-semibold text-white bg-white rounded-r-full hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:ring-offset-2 focus:ring-offset-gray-900">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-[#2563eb]" viewBox="0 0 20 20"
                            fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            </form>
        </div>


        <div class=" flex items-center space-x-4">
            <div class="px-2 py-2 font-semibold text-white bg-[#2563eb] text-white rounded-full hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:ring-offset-2 focus:ring-offset-gray-900 cursor-pointer"
                data-modal-target="iconModal">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="26px"
                    width="26px" version="1.1" id="_x32_" viewBox="0 0 512 512" xml:space="preserve">
                    <style type="text/css">
                        .st0 {
                            fill: white;
                        }
                    </style>
                    <g>
                        <path class="st0"
                            d="M459.21,255.989c0-11.3-0.913-22.635-2.794-33.803c16.642-7.144,32.968-15.377,48.855-24.665   c-3.252-13.919-7.68-27.556-13.216-40.711c-18.312,1.81-36.36,4.728-54.022,8.735c-5.061-10.14-10.948-19.859-17.608-28.988   c-6.661-9.165-14.077-17.759-22.187-25.684c9.27-15.58,17.618-31.826,25.016-48.689c-10.79-9.314-22.353-17.74-34.541-25.139   c-13.76,12.232-26.66,25.192-38.646,38.777c-9.999-5.255-20.49-9.657-31.246-13.137c-10.773-3.506-21.827-6.081-33.039-7.741   c-1.687-18.022-4.516-36.088-8.471-54.075c-14.199-1.16-28.417-1.16-42.616,0c-3.955,17.986-6.784,36.052-8.471,54.075   c-11.212,1.66-22.266,4.235-33.022,7.741c-10.772,3.48-21.264,7.882-31.264,13.137c-11.985-13.585-24.884-26.545-38.644-38.777   c-12.197,7.399-23.76,15.825-34.55,25.139c7.416,16.863,15.763,33.109,25.007,48.689c-8.066,7.925-15.518,16.519-22.178,25.684   c-6.643,9.147-12.548,18.848-17.609,28.988c-17.644-4.008-35.692-6.925-54.022-8.735c-5.535,13.155-9.964,26.792-13.216,40.711   c15.905,9.288,32.213,17.52,48.856,24.665c-1.881,11.168-2.794,22.502-2.794,33.803c0,11.335,0.913,22.653,2.794,33.812   c-16.642,7.17-32.951,15.386-48.856,24.674c3.252,13.919,7.681,27.556,13.216,40.719c18.33-1.819,36.378-4.745,54.022-8.743   c5.061,10.14,10.966,19.841,17.609,28.997c6.661,9.156,14.112,17.767,22.178,25.675c-9.244,15.579-17.592,31.844-25.007,48.688   c10.79,9.306,22.353,17.732,34.55,25.14c13.76-12.222,26.66-25.184,38.644-38.786c10,5.255,20.492,9.658,31.264,13.154   c10.756,3.506,21.81,6.081,33.022,7.733c1.687,18.04,4.516,36.096,8.471,54.066c14.199,1.178,28.417,1.178,42.616,0   c3.955-17.97,6.784-36.026,8.471-54.066c11.212-1.652,22.266-4.226,33.039-7.733c10.755-3.496,21.246-7.899,31.246-13.154   c11.986,13.602,24.885,26.564,38.646,38.786c12.188-7.408,23.751-15.834,34.541-25.14c-7.398-16.844-15.746-33.109-25.016-48.688   c8.11-7.908,15.526-16.519,22.187-25.675c6.66-9.156,12.547-18.857,17.608-28.997c17.662,3.998,35.71,6.924,54.022,8.743   c5.536-13.163,9.964-26.8,13.216-40.719c-15.888-9.288-32.213-17.504-48.855-24.674C458.297,278.642,459.21,267.324,459.21,255.989   z M110.081,303.403c-4.939-15.227-7.469-31.229-7.452-47.414c-0.017-16.159,2.513-32.16,7.452-47.414   c4.938-15.228,12.337-29.7,21.809-42.713c9.455-12.988,20.966-24.516,33.988-33.988c13.004-9.473,27.45-16.854,42.704-21.801   c8.787-2.856,17.855-4.798,27.046-6.01v140.186l-121.505,70.155C112.646,310.784,111.293,307.12,110.081,303.403z M255.996,279.503   l121.399,70.093c-8.944,11.564-19.454,21.941-31.264,30.535c-13.004,9.463-27.485,16.845-42.704,21.8   c-15.236,4.93-31.229,7.452-47.414,7.452c-16.185,0-32.195-2.522-47.432-7.452c-15.236-4.955-29.7-12.337-42.704-21.8   c-11.827-8.594-22.336-18.971-31.264-30.535L255.996,279.503z M401.919,303.403c-1.195,3.717-2.548,7.382-4.051,11.002   L276.363,244.24V104.063c9.191,1.213,18.259,3.155,27.064,6.01c15.255,4.947,29.7,12.328,42.704,21.801   c13.005,9.472,24.534,21,34.005,33.988c9.455,13.013,16.836,27.486,21.783,42.713c4.956,15.254,7.469,31.255,7.452,47.414   C409.389,272.174,406.875,288.176,401.919,303.403z" />
                    </g>
                </svg>
            </div>

        </div>

        <div class="text-white ml-8 mr-2 flex items-center justify-center" style="transform: scale(1.5);">
            <div id="user-button"></div>
        </div>
    </div>

</div>

<div id="iconModal" class="fixed z-10 inset-0 overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog"
    aria-modal="true">
    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-800 bg-opacity-75 transition-opacity flex items-center" aria-hidden="true">
        </div>
        <div
            class="inline-block align-middle bg-black rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full p-6">
            <div class="bg-black p-6 sm:p-6 sm:pb-4">
                <h3 class="text-2xl leading-6 font-medium text-white text-center" id="modal-title">
                    Welcome to SupplyStream!
                </h3>
                <br />
                <div class="mt-2">
                    <p class="text-lg text-gray-500 text-center">
                        The content displayed in the application is sourced from the Vimeo API, which is a third-party
                        service. SupplyFrame, the developer <a class="text-blue-500" href="https://prajwalsv.dev"
                            target="_blank">(Prajwal)</a> of this
                        application, does not have control over
                        the content
                        provided by the Vimeo API.
                    </p>
                    <p class="mt-2 text-lg text-gray-500 text-center">
                        Please be aware that the content may include graphic or sensitive material. SupplyFrame and the
                        author of this application are not responsible for the nature or accuracy of the content
                        retrieved from the Vimeo API.
                    </p>
                    <p class="mt-2 text-lg text-gray-500 text-center">
                        By using this application and accessing the content from the Vimeo API, you acknowledge that
                        SupplyFrame and the application author <a class="text-blue-500" href="https://prajwalsv.dev"
                            target="_blank">(Prajwal)</a> are not
                        liable for any issues or concerns
                        arising from
                        the third-party content.
                    </p>
                    <p class="mt-2 text-lg text-gray-500 text-center">
                        If you have any questions or concerns regarding the content, please contact Vimeo directly or
                        refer to their <a class="text-blue-800" href="https://www.vimeo.com/terms" target="_blank"
                            rel="noopener noreferrer">terms of service</a> and <a class="text-blue-800"
                            href="https://www.vimeo.com/policies" target="_blank" rel="noopener noreferrer">content
                            policies</a>.
                    </p>

                </div>
            </div>
            <div class="bg-black px-4 py-3 sm:px-6 sm:flex sm:flex-col items-center justify-center">
                <button type="button"
                    class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm"
                    data-modal-close>
                    Alright!
                </button>
            </div>
        </div>
    </div>
</div>


<script>
    // JavaScript code to handle modal functionality
    const openModalButtons = document.querySelectorAll('[data-modal-target]');
    const closeModalButtons = document.querySelectorAll('[data-modal-close]');
    const overlay = document.querySelector('.fixed.inset-0');

    openModalButtons.forEach(button => {
        button.addEventListener('click', () => {
            const modalId = button.getAttribute('data-modal-target');
            const modal = document.getElementById(modalId);
            openModal(modal);
        });
    });

    closeModalButtons.forEach(button => {
        button.addEventListener('click', () => {
            const modal = button.closest('.fixed.z-10');
            closeModal(modal);
        });
    });

    overlay.addEventListener('click', () => {
        const modals = document.querySelectorAll('.fixed.z-10');
        modals.forEach(modal => {
            closeModal(modal);
        });
    });

    function openModal(modal) {
        if (modal === null) return;
        modal.classList.remove('hidden');
        modal.setAttribute('aria-modal', 'true');
    }

    function closeModal(modal) {
        if (modal === null) return;
        modal.classList.add('hidden');
        modal.setAttribute('aria-modal', 'false');
    }

    window.addEventListener("load", async function () {
        Clerk.load().then(() => {
            console.log("Clerk loaded successfully!")
            window.Clerk = Clerk;

            const userButtonDiv = document.getElementById('user-button');
            if (userButtonDiv) {
                Clerk.mountUserButton(userButtonDiv, {
                    afterSignOutUrl: "/login",
                });
            }
        }).catch((error) => {
            console.log("Error loading Clerk:", error);
        });
    });


</script>